
{% extends "base.html" %}

{% block content %}
<style>

  /* create box around search requirement */
  .searchFunction {
      padding: 10px;
      border: 1px solid #000000;
  }

  /* create box around note requirement */
  .noteFunction {
      padding: 10px;
      border: 1px solid #000000;
  }

  /* create box around table requirement */
  .tableFunction{
    padding: 10px;
    border: 1px solid #000000;
  }

</style>

<!-- Title -->
<h1 class="Title">
  Welcome to your homepage!
</h1>

<!-- Search Requirement -->
<div class = "searchFunction">

  <form method="GET">
    <label for="query">Search:</label>
    <input type="search" placeholder="search" aria-label="Search", name="searched">
    <button type="submit"class="btn btn-outline-secondary">Search</button>
  </form>

  {% if keyword %}
  <h1 Notes search :> {{keyword}}</h1>
  
  {% if note_results %}
  <p>The result is found!<br></p>
  
  <p>Here is the result:<br></p>
  <ul> 
      {% for note in note_results %}
          <li>
              Note: 
                <strong>
                <a href="{{ url_for('editnote', notename = note.note_name) }}">
                {{ note.note_name}}
                </a>
                </strong>
              
          </li>
      {% endfor %}
  
      {% else %}
      Sorry, your seach term: <strong>{{keyword}}</strong> file is not found
      {% endif %}

    {% endif %}

</div>

<br>

<!-- Note Requirement -->
<div class = "noteFunction">
  <!-- represents the newnote and the edit notes buttons on the profile-->
  <form action="newnote">
    {{newnote.hidden_tag()}}
    <p>{{newnote.button}}</p>
  </form>
  <p>Your notes are:<br></p>
      <!--for loop to print every note in the dictionary in '/home' route function-->
      {% for note in note_list %}
          <div>
              <!--display the note name, note content, and an edit button-->
              <p>Note: {{note}}</p> 
              <p>Note-Text: {{note_list[note][0]}}</p>
              <!--If there are images (img_list exists), make a download attachment for each image-->
              {% if note_list[note][2] %}
              <span>Attachments: </span>
                {% for img in img_list %}
                <!--loop through all sets of images for each note-->
                  {% for name in img %}
                <!--link each image in the dictionary for 1 note-->
                    {% if img[name] == note_list[note][2] %}
                    <a href="download/{{name}}">{{name}}</a><br>
                    {% endif %}
                  {% endfor %}
                {% endfor %}
              {% endif %}
              <!--for every edit note button, it is linked to 'editnote/(name of the note corresponding to dictionary)'-->
              <form action = "editnote/{{note}}">
                <p>{{note_list[note][1].button}}</p>
              </form>
          </div>
      {% endfor %}
  </div>


<br>

<!-- Table Requirement -->
<div class = "tableFunction">
  <!-- create new table button which links to the new table webpage -->
  <a href="/newtable">
    <button>Create Table</button>
  </a>

  <div>
    <!-- Show list of all currently created tables-->
    <p>
        Your Tables:
        <!-- iterate through each table of the user's -->
        {% for table in table_list %}
        <div>
          <!-- create a link to the corresponding edittable page for that table which is using the dynamic route -->
          <a href="{{ url_for('edittable', table_id = table.id) }}">
              <!-- print the name of the table -->
              <p>{{table.table_name}}</p>
          </a>
        </div>
        {% endfor %}
    </p>
  </div>
</div>

{% endblock %}

